==========================================
AIMAK - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ VPS ps.kz
==========================================

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∞–π—Ç AIMAK –Ω–∞ VPS –æ—Ç ps.kz

==========================================
–®–ê–ì 1: –ó–∞–∫–∞–∑ VPS
==========================================

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://www.ps.kz/hosting/vps
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ:
   - Basic-2 (2GB RAM) - –º–∏–Ω–∏–º—É–º –¥–ª—è —Ä–∞–±–æ—Ç—ã
   - Basic-3 (4GB RAM) - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
3. –£–∫–∞–∂–∏—Ç–µ:
   - –û–°: Ubuntu 20.04 –∏–ª–∏ 22.04
   - –°—Ä–æ–∫: –≤—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü (–¥–ª—è —Ç–µ—Å—Ç–∞)
   - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –º–æ–∂–Ω–æ –±–µ–∑ –ø–∞–Ω–µ–ª–∏ (–¥–µ—à–µ–≤–ª–µ)
4. –í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–∫–∞–∑—É –Ω–∞–ø–∏—à–∏—Ç–µ:
   "–ü—Ä–æ—à—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å 7 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"
5. –û—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑

–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤—ã –ø–æ–ª—É—á–∏—Ç–µ email —Å –¥–∞–Ω–Ω—ã–º–∏:
- IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
- Root –ø–∞—Ä–æ–ª—å
- –î–∞–Ω–Ω—ã–µ –¥–ª—è SSH –¥–æ—Å—Ç—É–ø–∞

==========================================
–®–ê–ì 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPS
==========================================

Windows:
1. –°–∫–∞—á–∞–π—Ç–µ PuTTY: https://www.putty.org/
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PuTTY
3. –í –ø–æ–ª–µ Host Name –≤–≤–µ–¥–∏—Ç–µ IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ VPS
4. Port: 22
5. –ù–∞–∂–º–∏—Ç–µ Open
6. –õ–æ–≥–∏–Ω: root
7. –ü–∞—Ä–æ–ª—å: (–∏–∑ email –æ—Ç ps.kz)

Linux/Mac:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Terminal
2. –í–≤–µ–¥–∏—Ç–µ: ssh root@–í–ê–®_IP_–ê–î–†–ï–°
3. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∏–∑ email

==========================================
–®–ê–ì 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
==========================================

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ SSH –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

# –°–∫–∞—á–∞—Ç—å —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
wget https://raw.githubusercontent.com/m34959203/AIMAK/main/vps-install.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
sudo bash vps-install.sh

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
‚úì –û–±–Ω–æ–≤–∏—Ç —Å–∏—Å—Ç–µ–º—É
‚úì –£—Å—Ç–∞–Ω–æ–≤–∏—Ç Node.js 18
‚úì –£—Å—Ç–∞–Ω–æ–≤–∏—Ç pnpm
‚úì –£—Å—Ç–∞–Ω–æ–≤–∏—Ç PM2
‚úì –£—Å—Ç–∞–Ω–æ–≤–∏—Ç nginx
‚úì –°–∫–ª–æ–Ω–∏—Ä—É–µ—Ç –ø—Ä–æ–µ–∫—Ç
‚úì –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚úì –°–æ–±–µ—Ä–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 5-10 –º–∏–Ω—É—Ç

==========================================
–®–ê–ì 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx
==========================================

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx:

cd /var/www/aimaqaqshamy
sudo cp nginx-vps.conf /etc/nginx/sites-available/aimaqaqshamy

2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–∞–π—Ç:

sudo ln -s /etc/nginx/sites-available/aimaqaqshamy /etc/nginx/sites-enabled/

3. –£–¥–∞–ª–∏—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Å–∞–π—Ç:

sudo rm /etc/nginx/sites-enabled/default

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

sudo nginx -t

5. –ï—Å–ª–∏ –≤—Å–µ OK, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx:

sudo systemctl restart nginx

==========================================
–®–ê–ì 5: DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
==========================================

–í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º (ps.kz –∏–ª–∏ –≥–¥–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –¥–æ–º–µ–Ω):

1. –î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å—å:
   –ò–º—è: @
   –¢–∏–ø: A
   –ó–Ω–∞—á–µ–Ω–∏–µ: IP_–ê–î–†–ï–°_–í–ê–®–ï–ì–û_VPS
   TTL: 3600

2. –î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å—å –¥–ª—è www:
   –ò–º—è: www
   –¢–∏–ø: A
   –ó–Ω–∞—á–µ–Ω–∏–µ: IP_–ê–î–†–ï–°_–í–ê–®–ï–ì–û_VPS
   TTL: 3600

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø—è—Ç –≤ —Å–∏–ª—É —á–µ—Ä–µ–∑ 5-30 –º–∏–Ω—É—Ç.

==========================================
–®–ê–ì 6: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (HTTPS)
==========================================

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ DNS –æ–±–Ω–æ–≤–∏–ª—Å—è (–¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ VPS):

sudo certbot --nginx -d aimaqaqshamy.kz -d www.aimaqaqshamy.kz

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
1. –í–≤–µ–¥–∏—Ç–µ email
2. –°–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏ (Y)
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS (2)

–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π.

==========================================
–®–ê–ì 7: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
==========================================

cd /var/www/aimaqaqshamy

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ PM2
bash start.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
pm2 logs

–î–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –¥–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞:
- aimak-api (–ø–æ—Ä—Ç 4000)
- aimak-web (–ø–æ—Ä—Ç 3000)

==========================================
–®–ê–ì 8: –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
==========================================

cd /var/www/aimaqaqshamy/apps/api
node scripts/create-admin.js

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∞.

==========================================
–®–ê–ì 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
==========================================

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://aimaqaqshamy.kz
3. –°–∞–π—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ /admin
5. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ —Å–æ–∑–¥–∞–Ω–Ω—ã–º –∞–¥–º–∏–Ω–æ–º

==========================================
–ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´
==========================================

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
pm2 status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
pm2 logs

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Ç–æ–ª—å–∫–æ API
pm2 logs aimak-api

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Ç–æ–ª—å–∫–æ Web
pm2 logs aimak-web

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 restart all

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 stop all

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –∏–∑ GitHub
cd /var/www/aimaqaqshamy
git pull origin main
bash plesk-deploy.sh
pm2 restart all

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å nginx
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å nginx
sudo systemctl restart nginx

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ nginx
sudo tail -f /var/log/nginx/aimaqaqshamy-error.log

==========================================
TROUBLESHOOTING
==========================================

–ü—Ä–æ–±–ª–µ–º–∞: –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
–†–µ—à–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: pm2 status
2. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å "errored", –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: pm2 logs
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ nginx: sudo systemctl status nginx
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS: ping aimaqaqshamy.kz

–ü—Ä–æ–±–ª–µ–º–∞: 502 Bad Gateway
–†–µ—à–µ–Ω–∏–µ:
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã: bash start.sh
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã: netstat -tulpn | grep -E ':3000|:4000'

–ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
–†–µ—à–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª: cat apps/api/.env
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ DATABASE_URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ë–î: psql "postgresql://..."

==========================================
–¢–ï–•–ü–û–î–î–ï–†–ñ–ö–ê
==========================================

ps.kz —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞:
- Email: support@ps.kz
- –¢–µ–ª–µ—Ñ–æ–Ω: +7 (727) 388 82 31
- –†–µ–∂–∏–º: 24/7

==========================================
–°–¢–û–ò–ú–û–°–¢–¨
==========================================

Basic-2 (2GB RAM): ~2500-3000 —Ç–≥/–º–µ—Å
Basic-3 (4GB RAM): ~4000-5000 —Ç–≥/–º–µ—Å

+ –ü–µ—Ä–≤—ã–µ 7 –¥–Ω–µ–π - –ë–ï–°–ü–õ–ê–¢–ù–û (—Ç–µ—Å—Ç–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥)

==========================================
–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï SSL
==========================================

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å: sudo certbot renew --dry-run

==========================================
–ú–û–ù–ò–¢–û–†–ò–ù–ì
==========================================

PM2 –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

pm2 link YOUR_PUBLIC_KEY YOUR_SECRET_KEY

–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–∏: https://app.pm2.io/

==========================================

–ì–æ—Ç–æ–≤–æ! –í–∞—à —Å–∞–π—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ VPS üéâ

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É ps.kz
–∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –≤ —á–∞—Ç–µ —Å Claude.

==========================================
