# ====================================
# Railway Configuration for Smart CMS
# ====================================
#
# This monorepo contains two services: API and Web
# Each service should be deployed as a separate Railway service
#
# SETUP INSTRUCTIONS:
# 1. Create a new Railway project
# 2. Add PostgreSQL and Redis plugins
# 3. Create two services from this repo:
#    - api: Set RAILWAY_DOCKERFILE_PATH=Dockerfile.api
#    - web: Set RAILWAY_DOCKERFILE_PATH=Dockerfile.web
#
# For API service, add these environment variables:
#   RAILWAY_DOCKERFILE_PATH=Dockerfile.api
#   DATABASE_URL=${{Postgres.DATABASE_URL}}
#   REDIS_URL=${{Redis.REDIS_URL}}
#
# For Web service, add these environment variables:
#   RAILWAY_DOCKERFILE_PATH=Dockerfile.web
#   NEXT_PUBLIC_API_URL=https://<api-service>.up.railway.app/api

[build]
builder = "DOCKERFILE"

[deploy]
numReplicas = 1
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
